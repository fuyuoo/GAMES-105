# Lab1 小结

## FK 

* FK公式
  * $Q_1 $ = $Q_0$ * $R_1$
    * `*` 代表旋转叠加，而不是点乘，点乘的结果是标量
    * 也不是叉乘，叉乘求的是两个向量之间的垂直向量
  * $P_1$ = $P_0$+ $Q_0$$L_0$
    * 这里就是把旋转应用到$L_0$上
* 叶子节点
  * 在**Bvh**文件中的叶子节点是没有旋转的，只有**Offset**
  * **Offset**代表的是**自己和父节点**之间的向量差
* 局部和全局坐标系
  * Q，世界坐标系，朝向
  * R，局部坐标系，旋转 



## Retarget

* 没有实现任意姿势，而且更多的就不是同一个骨骼名字，或者更多或更少骨骼的问题
  * 实现任意姿势Retarget就是找到相同的骨骼，把差异化旋转叠加到需要的旋转上
  * todo 公式
* 因为T-Pose和A-Pose只在`lShoulder` 和`rShoulder`上旋转了45°，所以只是简单的把A-Pose的动画资源在响应位置的局部rotation进行旋转就可以了
  * 因为骨骼的父子节点关系不一致，需要重新映射
    * 关系不一致会导致在MotionData的index不一致